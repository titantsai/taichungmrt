(function(t){function e(e){for(var n,s,r=e[0],o=e[1],l=e[2],d=0,b=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&b.push(a[s][0]),a[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);u&&u(e);while(b.length)b.shift()();return i.push.apply(i,l||[]),c()}function c(){for(var t,e=0;e<i.length;e++){for(var c=i[e],n=!0,r=1;r<c.length;r++){var o=c[r];0!==a[o]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=c[0]))}return t}var n={},a={app:0},i=[];function s(e){if(n[e])return n[e].exports;var c=n[e]={i:e,l:!1,exports:{}};return t[e].call(c.exports,c,c.exports,s),c.l=!0,c.exports}s.m=t,s.c=n,s.d=function(t,e,c){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:c})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(c,n,function(e){return t[e]}.bind(null,n));return c},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],o=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=o;i.push([0,"chunk-vendors"]),c()})({0:function(t,e,c){t.exports=c("56d7")},"01eb":function(t,e,c){},"0833":function(t,e,c){"use strict";c("95c7")},"35a8":function(t,e,c){t.exports=c.p+"img/fac-escalator.c4e8b1be.svg"},4674:function(t,e,c){},5440:function(t,e,c){t.exports=c.p+"img/line-TRA.ff4616cc.svg"},"56d7":function(t,e,c){"use strict";c.r(e);c("e260"),c("e6cf"),c("cca6"),c("a79d");var n=c("7a23");function a(t,e){var c=Object(n["w"])("router-view");return Object(n["p"])(),Object(n["d"])(c)}c("c27b");const i={};i.render=a;var s=i,r=c("6c02"),o=c("bd0f"),l=c.n(o),u=c("5440"),d=c.n(u),b={class:"container"},f=Object(n["g"])("div",{class:"ms-handle"},[Object(n["g"])("span")],-1),p={class:"ds-header"},g={class:"ds-currentstation"},O={style:{display:"flex"}},h={class:"ds-station"},j={style:{display:"flex"}},m={src:l.a,alt:""},v={src:d.a,style:{"margin-left":"8px"},alt:""},y={class:"ds-nav"},S=Object(n["g"])("a",{class:"ds-nav-item"},"路線規劃",-1),k=Object(n["f"])("站點資訊"),x=Object(n["g"])("button",{class:"ds-nav-item",to:"transfer"},"轉乘資訊",-1),w={class:"map-container"};function T(t,e,c,a,i,s){var r=Object(n["w"])("router-link"),o=Object(n["w"])("router-view"),l=Object(n["w"])("RouteMap");return Object(n["p"])(),Object(n["d"])("div",b,[Object(n["g"])("div",{class:["ms-sheet",{msCollapsed:i.modalCollapsed}],id:"bottomsheet",onTouchstart:e[1]||(e[1]=function(){return s.initTouch&&s.initTouch.apply(s,arguments)}),onTouchmove:e[2]||(e[2]=function(){return s.handleTouch&&s.handleTouch.apply(s,arguments)}),onTouchend:e[3]||(e[3]=function(){return s.endTouch&&s.endTouch.apply(s,arguments)})},[f,Object(n["g"])("div",p,[Object(n["g"])("div",g,[Object(n["g"])("div",O,[Object(n["g"])("img",{class:"ds-num",src:s.current.path},null,8,["src"]),Object(n["g"])("div",h,[Object(n["g"])("h3",null,Object(n["y"])(s.current.zh),1),Object(n["g"])("p",null,Object(n["y"])(s.current.line),1)])]),Object(n["g"])("div",j,[Object(n["D"])(Object(n["g"])("img",m,null,512),[[n["A"],"HSR Taichung Station"===s.current.en]]),Object(n["D"])(Object(n["g"])("img",v,null,512),[[n["A"],s.current.transit]])])]),Object(n["g"])("div",y,[S,Object(n["g"])(r,{to:"/facilities",class:"ds-nav-item",onClick:s.openModal,replace:""},{default:Object(n["C"])((function(){return[k]})),_:1},8,["onClick"]),x])]),Object(n["g"])(o,{class:"ds-nav-view"})],34),Object(n["g"])("div",w,[Object(n["g"])(l)])])}c("7db0");var I=c("5502"),C=(c("99af"),c("bc3a")),M=c.n(C),D=c("6c2d"),Y="https://taichungmetro-github-default-rtdb.firebaseio.com/",F=M.a.create({baseURL:Y,withCredentials:!1,headers:{Accept:"application/json","Content-Type":"application/json"}}),R=function(){var t="c48fa21c86cc4d09913f9f5ff49a8ff9",e="21p51wndihCNdkztosM0CJ3v2ww",c=(new Date).toGMTString(),n=new D["a"]("SHA-1","TEXT");n.setHMACKey(e,"TEXT"),n.update("x-date: "+c);var a=n.getHMAC("B64"),i='hmac username="/'+t+'/", algorithm="hmac-sha1", headers="x-date", signature="/'+a+'/"';return{Authorization:i,"X-Date":c}},_=M.a.create({headers:R()}),B={getRoute:function(){return F.get("./routes.json")},getStationInfo:function(t){return F.get("/StationInfos/".concat(t,".json"))},getYouBikeStat:function(){return M.a.get("https://datacenter.taichung.gov.tw/swagger/OpenData/9af00e84-473a-4f3d-99be-b875d8e86256")},getFare:function(t,e){if(t!==e)return _.get("https://ptx.transportdata.tw/MOTC/v2/Rail/Metro/ODFare/TMRT?$filter=OriginStationID%20eq%20'".concat(t,"'%20and%20DestinationStationID%20eq%20'").concat(e,"'&$format=JSON"))}},A=Object(I["a"])({state:{fareSelection:!1,database:{},current:{},dest:{},fare:{},stationInfo:{}},mutations:{loadData:function(t,e){t.database=e},selectedInfo:function(t,e){t.current=e},setDest:function(t,e){t.dest=e,console.log(t.dest)},setFareSearch:function(t){t.fareSelection=!0},clearFareSearch:function(t){t.fareSelection=!1},loadFare:function(t,e){t.fare=e},loadStationInfo:function(t,e){t.stationInfo=e}},actions:{initRoute:function(){var t=this;B.getRoute().then((function(e){var c=e.data;t.commit("loadData",c)})).catch((function(t){return console.log(t)}))},showSelected:function(t,e){t.commit("selectedInfo",e)},setSearchMode:function(){this.commit("setFareSearch")},clearSearchMode:function(){this.commit("clearFareSearch")},setDest:function(t,e){t.commit("setDest",e)},getFare:function(t,e){B.getFare(this.state.current.uid,this.state.dest.uid).then((function(c){console.log(c.data),e=c.data,t.commit("loadFare",e)}))},getStationInfo:function(t,e){B.getStationInfo(this.state.current.uid).then((function(c){e=c.data,t.commit("loadStationInfo",e)}))}},getters:{getBikesById:function(t){return function(e){return t.bikes.find((function(t){return t.sno===e}))}}},modules:{}}),q=Object(n["E"])("data-v-2724ebda");Object(n["s"])("data-v-2724ebda");var H={class:"route"},P={class:"route-map",id:"routemap"},z={class:"route-bg"};Object(n["q"])();var E=q((function(t,e,c,a,i,s){return Object(n["p"])(),Object(n["d"])("div",H,[Object(n["g"])("div",P,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(s.Routes,(function(t){return Object(n["p"])(),Object(n["d"])("div",{key:t.id},[Object(n["g"])("div",z,[Object(n["g"])("img",{src:t.path,alt:""},null,8,["src"])]),(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(t.stations,(function(e){return Object(n["p"])(),Object(n["d"])("div",{class:"route-station",key:e.id,style:{top:"".concat(e.position.top),left:"".concat(e.position.left)},onClick:function(t){return s.selectStation(e)}},[Object(n["g"])("span",{class:["route-station-dot",{hasTransit:e.transit}],style:{borderColor:"".concat(t.color)}},null,6),Object(n["g"])("div",{class:["route-station-tag","".concat(e.position.tag)]},Object(n["y"])(e.zh),3)],12,["onClick"])})),128))])})),128))])])})),J={created:function(){},mounted:function(){},data:function(){return{}},methods:{selectStation:function(t){if(A.state.fareSelection)return A.dispatch("setDest",t),void A.dispatch("getFare");A.dispatch("showSelected",t),A.dispatch("getStationInfo")}},computed:{Routes:function(){return A.state.database}}};c("81b2");J.render=E,J.__scopeId="data-v-2724ebda";var X=J,K={components:{RouteMap:X},data:function(){return{modalCollapsed:!0,fullHeight:"",initY:"",endY:"",modalHeight:""}},created:function(){A.dispatch("initRoute")},methods:{initTouch:function(t){this.initY=t.touches[0].clientY,this.fullHeight=t.touches[0].pageY},handleTouch:function(t){var e="";(!0===this.modalCollapsed||!1===this.modalCollapsed&&this.initY>44&&this.initY<150)&&(e="calc( 100% - ".concat(t.touches[0].clientY,"px)")),document.querySelector("#bottomsheet").style.height=e},endTouch:function(t){this.endY=t.changedTouches[0].clientY,this.endY<this.initY?(this.modalCollapsed=!1,document.querySelector("#bottomsheet").style.height="100%"):this.initY<73&&this.initY>44&&this.endY>this.initY&&(this.modalCollapsed=!0,document.querySelector("#bottomsheet").style.height="184px")},openModal:function(){this.modalCollapsed=!1,document.querySelector("#bottomsheet").style.height="100%"},initSearch:function(){A.dispatch("setSearchMode")},endSearch:function(){A.dispatch("clearSearchMode")},setOrigin:function(t){A.commit("setFareSearch"),A.dispatch("setOrigin",t)},setDest:function(t){A.dispatch("setDest",t),A.state.origin!==A.state.dest?(A.dispatch("getFare"),A.commit("clearFareSearch")):alert("請選擇不同的起迄站")}},computed:{fareSearchMode:function(){return A.state.fareSelection},current:function(){return A.state.current},dest:function(){return A.state.dest},fareData:function(){return A.state.fare[0]}}};c("0833");K.render=T;var L=K,N=(c("b0c0"),c("ca69")),$=c.n(N),G=c("35a8"),U=c.n(G),W=c("c5c4"),Q=c.n(W),V={class:"ds-list"},Z=Object(n["g"])("div",{class:"ds-list-header"},"首末班車",-1),tt={class:"ds-schedule"},et={class:"ds-schedule-via"},ct={class:"ds-schedule-name"},nt={style:{display:"flex","margin-right":"16px"}},at={class:"ds-time"},it=Object(n["g"])("span",{class:"ds-badge"},"首",-1),st={class:"ds-time"},rt=Object(n["g"])("span",{class:"ds-badge"},"末",-1),ot=Object(n["g"])("div",{class:"ds-list-header"},"出入口資訊",-1),lt={class:"ds-exit"},ut={class:"ds-exit-name"},dt={class:"ds-exit-type-group"},bt={key:0,src:$.a},ft={key:1,src:U.a},pt={key:2,src:Q.a},gt=Object(n["g"])("div",{class:"ds-list-header"},"車站設施",-1),Ot={class:"ds-service-img"},ht={class:"ds-service-name"},jt=Object(n["g"])("div",{class:"ds-list-footer"},null,-1);function mt(t,e,c,a,i,s){return Object(n["p"])(),Object(n["d"])("div",V,[Z,Object(n["g"])("ul",null,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(s.current.servicetime,(function(t){return Object(n["p"])(),Object(n["d"])("li",{class:"ds-list-item ds-list-schedule",key:t.to},[Object(n["g"])("div",tt,[Object(n["g"])("div",et,[Object(n["g"])("img",{src:t.via},null,8,["src"])]),Object(n["g"])("div",ct,[Object(n["g"])("h3",null,"往"+Object(n["y"])(t.to),1)])]),Object(n["g"])("div",nt,[Object(n["g"])("div",at,[it,Object(n["f"])(Object(n["y"])(t.first),1)]),Object(n["g"])("div",st,[rt,Object(n["f"])(Object(n["y"])(t.last),1)])])])})),128))]),ot,Object(n["g"])("ul",null,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(s.current.exits,(function(t){return Object(n["p"])(),Object(n["d"])("li",{class:"ds-list-item ds-list-exit",key:t.num},[Object(n["g"])("div",lt,[Object(n["g"])("img",{class:"ds-exit-num",src:t.src,alt:""},null,8,["src"]),Object(n["g"])("div",ut,[Object(n["g"])("h3",null,Object(n["y"])(t.name),1),Object(n["g"])("p",null,Object(n["y"])(t.hints),1)])]),Object(n["g"])("div",dt,[t.stair?(Object(n["p"])(),Object(n["d"])("img",bt)):Object(n["e"])("",!0),t.escalator?(Object(n["p"])(),Object(n["d"])("img",ft)):Object(n["e"])("",!0),t.elevator?(Object(n["p"])(),Object(n["d"])("img",pt)):Object(n["e"])("",!0)])])})),128))]),gt,Object(n["g"])("ul",null,[(Object(n["p"])(!0),Object(n["d"])(n["a"],null,Object(n["v"])(s.current.services,(function(t){return Object(n["p"])(),Object(n["d"])("li",{class:"ds-list-item",key:t.name},[Object(n["g"])("div",Ot,[Object(n["g"])("img",{src:t.src,alt:""},null,8,["src"])]),Object(n["g"])("div",ht,[Object(n["g"])("h3",null,Object(n["y"])(t.name),1),Object(n["g"])("p",null,Object(n["y"])(t.position),1)])])})),128))]),jt])}var vt={data:function(){return{}},mounted:function(){},computed:{current:function(){return A.state.stationInfo}}};c("6e5e");vt.render=mt;var yt=vt,St=(c("fb6a"),c("cd44")),kt=c.n(St),xt=Object(n["E"])("data-v-5ba597a9");Object(n["s"])("data-v-5ba597a9");var wt={class:"ds-list"},Tt=Object(n["g"])("div",{class:"ds-list-header"},"停車場",-1),It=Object(n["g"])("ul",null,null,-1),Ct=Object(n["g"])("div",{class:"ds-list-header"},"iBike微笑單車",-1),Mt={class:"ds-list-item ds-list-ibike"},Dt={class:"ds-service-img",style:{display:"flex","align-items":"center"}},Yt=Object(n["g"])("img",{src:kt.a,alt:""},null,-1),Ft={class:"ds-service-name"},Rt={class:"ds-ibike-status"},_t={class:"ds-ibike-rentable"},Bt=Object(n["g"])("div",{class:"ds-list-header"},"公車轉乘",-1),At=Object(n["g"])("ul",null,null,-1);Object(n["q"])();var qt=xt((function(t,e,c,a,i,s){return Object(n["p"])(),Object(n["d"])("div",wt,[Tt,It,Ct,Object(n["g"])("ul",null,[Object(n["g"])("li",Mt,[Object(n["g"])("div",Dt,[Yt,Object(n["g"])("div",Ft,Object(n["y"])(s.filterBike.sna.slice(11)),1)]),Object(n["g"])("div",Rt,[Object(n["g"])("span",_t,Object(n["y"])(s.filterBike.sbi),1),Object(n["f"])("/"+Object(n["y"])(s.filterBike.tot),1)])])]),Bt,At])})),Ht={data:function(){return{}},computed:{bikes:function(){return A.state.bikes},filterBike:function(){var t=A.state.current.bike;return A.getters.getBikesById("".concat(t))}}};c("72e3");Ht.render=qt,Ht.__scopeId="data-v-5ba597a9";var Pt=Ht,zt=Object(n["E"])("data-v-05563f74"),Et=zt((function(t,e,c,n,a,i){return" placeholder "})),Jt={};Jt.render=Et,Jt.__scopeId="data-v-05563f74";var Xt=Jt,Kt=[{path:"/",name:"Map",component:L,children:[{name:"fare",path:"fare",component:Xt},{name:"facilities",path:"facilities",component:yt},{name:"transfer",path:"transfer",component:Pt}]}],Lt=Object(r["a"])({history:Object(r["b"])(),routes:Kt}),Nt=Lt,$t=(c("4674"),c("260b")),Gt={apiKey:"AIzaSyAh-cvnsYbIP4Oor2qj5g7FlxpJr83qWL8",authDomain:"taichungmetro-github.firebaseapp.com",projectId:"taichungmetro-github",storageBucket:"taichungmetro-github.appspot.com",messagingSenderId:"571532253123",appId:"1:571532253123:web:57b30736f2c5d13e180f76"};$t["a"].initializeApp(Gt),Object(n["c"])(s).use(A).use(Nt).mount("#app")},"6a72":function(t,e,c){},"6e5e":function(t,e,c){"use strict";c("f544")},"72e3":function(t,e,c){"use strict";c("01eb")},"81b2":function(t,e,c){"use strict";c("6a72")},"930b":function(t,e,c){},"95c7":function(t,e,c){},bd0f:function(t,e,c){t.exports=c.p+"img/line-HSR.4e6684b8.svg"},c27b:function(t,e,c){"use strict";c("930b")},c5c4:function(t,e,c){t.exports=c.p+"img/fac-elevator.1c1cec4d.svg"},ca69:function(t,e,c){t.exports=c.p+"img/fac-stair.e8a31540.svg"},cd44:function(t,e,c){t.exports=c.p+"img/ibike.0cd454c1.svg"},f544:function(t,e,c){}});
//# sourceMappingURL=app.7c8aca4d.js.map